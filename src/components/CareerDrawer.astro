---
---

<!-- Backdrop overlay (clicking it will close the drawer) -->
<div id="career-backdrop" class="fixed inset-0 z-40 bg-black/40 opacity-0 pointer-events-none transition-opacity duration-300"></div>

<div id="career-drawer" class="fixed inset-y-0 right-0 z-50 w-full md:w-[420px] transform translate-x-full transition-transform duration-300 ease-in-out">
  <div class="h-full flex flex-col bg-surface-dark border-l border-white/5 shadow-2xl">
    <div class="flex items-center justify-between p-6 border-b border-white/5">
      <h3 class="text-lg font-bold">Kariera w InCode</h3>
      <button id="career-close" aria-label="Zamknij" class="p-2 text-gray-300 hover:text-white">
        <span class="material-symbols-outlined">close</span>
      </button>
    </div>

    <div class="p-6 overflow-auto">
      <p class="text-gray-300 mb-4">Szukamy utalentowanych inżynierów. Wybierz ofertę i prześlij swoje CV — skontaktujemy się wkrótce.</p>

      <form id="career-form" class="space-y-4">
        <div>
          <label class="text-sm font-medium text-gray-300">Imię i nazwisko</label>
          <input name="name" required class="w-full mt-1 px-3 py-2 rounded-md bg-background-dark border border-white/10 text-white outline-none focus:border-accent focus:ring-1 focus:ring-accent" />
        </div>

        <div>
          <label class="text-sm font-medium text-gray-300">Email</label>
          <input type="email" name="email" required class="w-full mt-1 px-3 py-2 rounded-md bg-background-dark border border-white/10 text-white outline-none focus:border-accent focus:ring-1 focus:ring-accent" />
        </div>

        <div>
          <label class="text-sm font-medium text-gray-300">Telefon (opcjonalnie)</label>
          <input name="phone" class="w-full mt-1 px-3 py-2 rounded-md bg-background-dark border border-white/10 text-white outline-none focus:border-accent focus:ring-1 focus:ring-accent" />
        </div>

        <div>
          <label class="text-sm font-medium text-gray-300">Stanowisko</label>
          <select name="position" class="w-full mt-1 px-3 py-2 rounded-md bg-background-dark border border-white/10 text-white outline-none focus:border-accent focus:ring-1 focus:ring-accent">
            <option value="Frontend Developer">Frontend Developer</option>
            <option value="Fullstack Developer">Fullstack Developer</option>
            <option value="Backend Developer">Backend Developer</option>
            <option value="UX/UI Designer">UX/UI Designer</option>
            <option value="Inne">Inne</option>
          </select>
        </div>

        <div>
          <label class="text-sm font-medium text-gray-300">List motywacyjny / opis</label>
          <textarea name="message" rows="4" class="w-full mt-1 px-3 py-2 rounded-md bg-background-dark border border-white/10 text-white outline-none focus:border-accent focus:ring-1 focus:ring-accent"></textarea>
        </div>

        <div>
          <label class="text-sm font-medium text-gray-300">CV (PDF / DOCX)</label>
          <input type="file" name="cv" accept=".pdf,.doc,.docx" class="w-full mt-1 text-sm text-gray-300" />
        </div>

        <div class="flex items-center gap-2">
          <input type="checkbox" id="consent" name="consent" required class="h-4 w-4 text-accent bg-background-dark border-white/10" />
          <label for="consent" class="text-sm text-gray-300">Wyrażam zgodę na przetwarzanie danych osobowych w celu rekrutacji.</label>
        </div>

        <div class="pt-2">
          <button type="submit" class="w-full h-12 rounded-full bg-accent hover:bg-[#0d6b3f] text-white font-bold shadow-lg shadow-[#0f7a44]/20 transition-all">Wyślij CV</button>
        </div>
      </form>

      <div id="career-status" class="hidden mt-4 text-sm"></div>
    </div>
  </div>
</div>

<!-- Success Popup -->
<div id="career-success-popup" class="fixed inset-0 z-[60] flex items-center justify-center opacity-0 pointer-events-none transition-opacity duration-300">
  <div class="absolute inset-0 bg-black/60 backdrop-blur-sm"></div>
  <div class="relative bg-surface-dark border border-white/10 rounded-3xl p-8 max-w-md mx-4 transform scale-95 transition-transform duration-300" id="career-popup-content">
    <!-- Success icon -->
    <div class="w-20 h-20 mx-auto mb-6 rounded-full bg-gradient-to-br from-primary/20 to-primary/5 border border-primary/30 flex items-center justify-center">
      <div class="w-14 h-14 rounded-full bg-gradient-to-br from-primary to-emerald-600 flex items-center justify-center shadow-lg shadow-primary/30">
        <span class="material-symbols-outlined text-white text-3xl">check</span>
      </div>
    </div>
    
    <!-- Content -->
    <div class="text-center">
      <h3 class="text-2xl font-bold text-white mb-2">Dziękujemy za zgłoszenie!</h3>
      <p class="text-gray-400 mb-6">Twoje CV zostało pomyślnie przesłane. Nasz zespół HR skontaktuje się z Tobą wkrótce.</p>
      
      <!-- Decorative line -->
      <div class="flex items-center justify-center gap-2 mb-6">
        <div class="w-8 h-px bg-gradient-to-r from-transparent to-primary/50"></div>
        <div class="w-2 h-2 rounded-full bg-primary/50"></div>
        <div class="w-8 h-px bg-gradient-to-l from-transparent to-primary/50"></div>
      </div>
      
      <button id="career-popup-close" class="px-8 py-3 rounded-full bg-gradient-to-r from-primary to-emerald-600 hover:from-primary/90 hover:to-emerald-600/90 text-white font-bold transition-all shadow-lg shadow-primary/20 hover:shadow-primary/40">
        Zamknij
      </button>
    </div>
    
    <!-- Corner decorations -->
    <div class="absolute top-4 left-4 w-8 h-8 border-l-2 border-t-2 border-primary/20 rounded-tl-xl"></div>
    <div class="absolute bottom-4 right-4 w-8 h-8 border-r-2 border-b-2 border-primary/20 rounded-br-xl"></div>
  </div>
</div>

<script>
  const drawer = document.getElementById('career-drawer');
  const closeBtn = document.getElementById('career-close');
  const form = document.getElementById('career-form');
  const status = document.getElementById('career-status');

  function openCareer() {
    drawer.classList.remove('translate-x-full');
    drawer.classList.add('translate-x-0');
    backdrop.classList.remove('opacity-0','pointer-events-none');
    backdrop.classList.add('opacity-100','pointer-events-auto');
  }

  function closeCareer() {
    drawer.classList.remove('translate-x-0');
    drawer.classList.add('translate-x-full');
    backdrop.classList.remove('opacity-100','pointer-events-auto');
    backdrop.classList.add('opacity-0','pointer-events-none');
  }

  // expose open function globally for header trigger
  window.openCareer = openCareer;

  closeBtn?.addEventListener('click', closeCareer);
  const backdrop = document.getElementById('career-backdrop');
  backdrop?.addEventListener('click', closeCareer);

  // Close on Escape
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') closeCareer();
  });

  form?.addEventListener('submit', async (e) => {
    e.preventDefault();
    const btn = form.querySelector('button[type="submit"]');
    const original = btn.innerHTML;
    btn.disabled = true;
    btn.innerText = 'Wysyłanie...';

    // Simulate sending (since no backend)
    await new Promise(resolve => setTimeout(resolve, 1500));

    // Show success popup
    const popup = document.getElementById('career-success-popup');
    const popupContent = document.getElementById('career-popup-content');
    
    popup.classList.remove('opacity-0', 'pointer-events-none');
    popup.classList.add('opacity-100', 'pointer-events-auto');
    popupContent.classList.remove('scale-95');
    popupContent.classList.add('scale-100');
    
    form.reset();
    btn.disabled = false;
    btn.innerHTML = original;
    
    // Close drawer
    closeCareer();
  });

  // Popup close handlers
  const popupCloseBtn = document.getElementById('career-popup-close');
  const successPopup = document.getElementById('career-success-popup');
  
  function closeSuccessPopup() {
    const popup = document.getElementById('career-success-popup');
    const popupContent = document.getElementById('career-popup-content');
    popup.classList.remove('opacity-100', 'pointer-events-auto');
    popup.classList.add('opacity-0', 'pointer-events-none');
    popupContent.classList.remove('scale-100');
    popupContent.classList.add('scale-95');
  }
  
  popupCloseBtn?.addEventListener('click', closeSuccessPopup);
  successPopup?.addEventListener('click', (e) => {
    if (e.target === successPopup || e.target.classList.contains('backdrop-blur-sm')) {
      closeSuccessPopup();
    }
  });
</script>
